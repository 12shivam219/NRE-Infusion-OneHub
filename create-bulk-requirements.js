import dotenv from 'dotenv';
import { createClient } from '@supabase/supabase-js';

// Load environment variables
dotenv.config();

const supabaseUrl = process.env.VITE_SUPABASE_URL || '';
const supabaseKey = process.env.VITE_SUPABASE_ANON_KEY || '';

if (!supabaseUrl || !supabaseKey) {
  console.error('Missing Supabase credentials in .env file');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, supabaseKey);

const requirements = [
  // Senior Frontend Developers (20 requirements)
  {
    title: 'Senior React Developer',
    company: 'TechCorp Inc',
    status: 'NEW',
    description: 'Looking for a Senior React developer with 5+ years experience',
    primary_tech_stack: 'React, TypeScript, Node.js',
    location: 'San Francisco, CA',
    rate: '$150-180/hr',
    remote: 'Hybrid',
    duration: '6 months',
    applied_for: '2025-01-05',
  },
  {
    title: 'React/Next.js Developer',
    company: 'Digital Solutions LLC',
    status: 'IN_PROGRESS',
    description: 'Need experienced Next.js developer for SaaS platform',
    primary_tech_stack: 'Next.js, React, PostgreSQL',
    location: 'New York, NY',
    rate: '$140-160/hr',
    remote: 'Remote',
    duration: '3 months',
    applied_for: '2025-01-04',
  },
  {
    title: 'Frontend Engineer - Vue.js',
    company: 'StartUp Ventures',
    status: 'INTERVIEW',
    description: 'Vue.js specialist for progressive web app development',
    primary_tech_stack: 'Vue.js, Nuxt, JavaScript',
    location: 'Austin, TX',
    rate: '$130-150/hr',
    remote: 'Full Remote',
    duration: '4 months',
    applied_for: '2025-01-03',
  },
  {
    title: 'Angular Developer',
    company: 'Enterprise Systems',
    status: 'NEW',
    description: 'Enterprise Angular developer for large-scale application',
    primary_tech_stack: 'Angular, TypeScript, RxJS',
    location: 'Boston, MA',
    rate: '$135-155/hr',
    remote: 'On-site',
    duration: '8 months',
    applied_for: '2025-01-02',
  },
  {
    title: 'Svelte Developer',
    company: 'Innovative Tech',
    status: 'OFFER',
    description: 'Svelte specialist for modern web applications',
    primary_tech_stack: 'Svelte, SvelteKit, JavaScript',
    location: 'Seattle, WA',
    rate: '$125-145/hr',
    remote: 'Hybrid',
    duration: '5 months',
    applied_for: '2025-01-01',
  },
  {
    title: 'React Native Developer',
    company: 'Mobile First Co',
    status: 'NEW',
    description: 'React Native specialist for cross-platform mobile apps',
    primary_tech_stack: 'React Native, JavaScript, Expo',
    location: 'Los Angeles, CA',
    rate: '$140-165/hr',
    remote: 'Remote',
    duration: '6 months',
    applied_for: '2024-12-31',
  },
  {
    title: 'Frontend Architect',
    company: 'Architecture Labs',
    status: 'IN_PROGRESS',
    description: 'Lead frontend architect for design system development',
    primary_tech_stack: 'React, TypeScript, Design Systems',
    location: 'Chicago, IL',
    rate: '$170-200/hr',
    remote: 'Hybrid',
    duration: '12 months',
    applied_for: '2024-12-30',
  },
  {
    title: 'Tailwind CSS Specialist',
    company: 'Design & Dev',
    status: 'NEW',
    description: 'Tailwind CSS expert for utility-first styling',
    primary_tech_stack: 'Tailwind CSS, React, CSS',
    location: 'Denver, CO',
    rate: '$120-140/hr',
    remote: 'Full Remote',
    duration: '3 months',
    applied_for: '2024-12-29',
  },
  {
    title: 'WebGL/Three.js Developer',
    company: 'Graphics Studios',
    status: 'INTERVIEW',
    description: '3D web graphics specialist using Three.js',
    primary_tech_stack: 'Three.js, WebGL, JavaScript',
    location: 'Portland, OR',
    rate: '$145-165/hr',
    remote: 'Hybrid',
    duration: '4 months',
    applied_for: '2024-12-28',
  },
  {
    title: 'Accessibility (a11y) Expert',
    company: 'Inclusive Tech',
    status: 'NEW',
    description: 'Web accessibility specialist for WCAG compliance',
    primary_tech_stack: 'JavaScript, ARIA, WCAG',
    location: 'Philadelphia, PA',
    rate: '$130-150/hr',
    remote: 'Remote',
    duration: '5 months',
    applied_for: '2024-12-27',
  },
  {
    title: 'Web Performance Engineer',
    company: 'Speed Labs',
    status: 'IN_PROGRESS',
    description: 'Optimize web performance and Core Web Vitals',
    primary_tech_stack: 'JavaScript, Performance Tools, Analytics',
    location: 'Miami, FL',
    rate: '$135-160/hr',
    remote: 'Hybrid',
    duration: '6 months',
    applied_for: '2024-12-26',
  },
  {
    title: 'GraphQL Developer',
    company: 'API First Inc',
    status: 'NEW',
    description: 'GraphQL specialist for modern API development',
    primary_tech_stack: 'GraphQL, Apollo, Node.js',
    location: 'Atlanta, GA',
    rate: '$140-160/hr',
    remote: 'Remote',
    duration: '4 months',
    applied_for: '2024-12-25',
  },
  {
    title: 'TypeScript Expert',
    company: 'Type Safe Co',
    status: 'OFFER',
    description: 'Advanced TypeScript developer for type-safe applications',
    primary_tech_stack: 'TypeScript, JavaScript, OOP',
    location: 'Phoenix, AZ',
    rate: '$145-170/hr',
    remote: 'Hybrid',
    duration: '5 months',
    applied_for: '2024-12-24',
  },
  {
    title: 'Testing Specialist (Cypress)',
    company: 'QA Masters',
    status: 'NEW',
    description: 'Cypress and Playwright testing automation expert',
    primary_tech_stack: 'Cypress, Playwright, JavaScript',
    location: 'San Diego, CA',
    rate: '$125-145/hr',
    remote: 'Full Remote',
    duration: '3 months',
    applied_for: '2024-12-23',
  },
  {
    title: 'CSS Specialist',
    company: 'Style Experts',
    status: 'IN_PROGRESS',
    description: 'Advanced CSS and modern styling techniques',
    primary_tech_stack: 'CSS, SASS, CSS-in-JS',
    location: 'Washington, DC',
    rate: '$120-140/hr',
    remote: 'Hybrid',
    duration: '4 months',
    applied_for: '2024-12-22',
  },
  {
    title: 'State Management Expert',
    company: 'Redux Specialists',
    status: 'INTERVIEW',
    description: 'Redux, Zustand, or Recoil state management expert',
    primary_tech_stack: 'Redux, Zustand, React',
    location: 'Raleigh, NC',
    rate: '$135-155/hr',
    remote: 'Remote',
    duration: '4 months',
    applied_for: '2024-12-21',
  },
  {
    title: 'Component Library Developer',
    company: 'UI Components Co',
    status: 'NEW',
    description: 'Build and maintain reusable component libraries',
    primary_tech_stack: 'React, Storybook, TypeScript',
    location: 'Orlando, FL',
    rate: '$130-150/hr',
    remote: 'Hybrid',
    duration: '6 months',
    applied_for: '2024-12-20',
  },
  {
    title: 'Micro-frontends Developer',
    company: 'Scalable Apps',
    status: 'NEW',
    description: 'Micro-frontends architecture specialist',
    primary_tech_stack: 'Module Federation, React, JavaScript',
    location: 'Minneapolis, MN',
    rate: '$150-175/hr',
    remote: 'Remote',
    duration: '5 months',
    applied_for: '2024-12-19',
  },
  {
    title: 'JAMstack Developer',
    company: 'Static First Ltd',
    status: 'OFFER',
    description: 'JAMstack (Next.js, Gatsby, Hugo) specialist',
    primary_tech_stack: 'Next.js, Gatsby, Netlify',
    location: 'Nashville, TN',
    rate: '$130-150/hr',
    remote: 'Full Remote',
    duration: '3 months',
    applied_for: '2024-12-18',
  },
  {
    title: 'PWA Developer',
    company: 'Progressive Apps',
    status: 'NEW',
    description: 'Progressive Web App specialist with Service Workers',
    primary_tech_stack: 'PWA, Service Workers, JavaScript',
    location: 'Memphis, TN',
    rate: '$125-145/hr',
    remote: 'Hybrid',
    duration: '4 months',
    applied_for: '2024-12-17',
  },

  // Backend Developers (25 requirements)
  {
    title: 'Senior Node.js Developer',
    company: 'Backend Masters',
    status: 'NEW',
    description: 'Senior Node.js developer for scalable backend systems',
    primary_tech_stack: 'Node.js, Express, MongoDB',
    location: 'San Francisco, CA',
    rate: '$155-185/hr',
    remote: 'Hybrid',
    duration: '6 months',
    applied_for: '2025-01-05',
  },
  {
    title: 'Python Django Developer',
    company: 'Django Experts',
    status: 'IN_PROGRESS',
    description: 'Django developer for rapid web development',
    primary_tech_stack: 'Python, Django, PostgreSQL',
    location: 'New York, NY',
    rate: '$135-155/hr',
    remote: 'Remote',
    duration: '5 months',
    applied_for: '2025-01-04',
  },
  {
    title: 'FastAPI Developer',
    company: 'API Speed',
    status: 'INTERVIEW',
    description: 'FastAPI specialist for modern async APIs',
    primary_tech_stack: 'Python, FastAPI, Async',
    location: 'Austin, TX',
    rate: '$130-150/hr',
    remote: 'Full Remote',
    duration: '4 months',
    applied_for: '2025-01-03',
  },
  {
    title: 'Java Spring Boot Developer',
    company: 'Enterprise Java',
    status: 'NEW',
    description: 'Spring Boot specialist for enterprise applications',
    primary_tech_stack: 'Java, Spring Boot, Microservices',
    location: 'Boston, MA',
    rate: '$140-165/hr',
    remote: 'On-site',
    duration: '8 months',
    applied_for: '2025-01-02',
  },
  {
    title: 'Go/Golang Developer',
    company: 'Go Systems',
    status: 'OFFER',
    description: 'Go specialist for high-performance systems',
    primary_tech_stack: 'Go, Microservices, Docker',
    location: 'Seattle, WA',
    rate: '$150-175/hr',
    remote: 'Hybrid',
    duration: '6 months',
    applied_for: '2025-01-01',
  },
  {
    title: 'Rust Developer',
    company: 'Systems Programming',
    status: 'NEW',
    description: 'Rust developer for systems and performance-critical code',
    primary_tech_stack: 'Rust, WebAssembly, C++',
    location: 'Los Angeles, CA',
    rate: '$160-190/hr',
    remote: 'Remote',
    duration: '6 months',
    applied_for: '2024-12-31',
  },
  {
    title: 'C# .NET Developer',
    company: 'Microsoft Stack',
    status: 'IN_PROGRESS',
    description: '.NET and C# developer for Windows and cloud applications',
    primary_tech_stack: 'C#, .NET, Azure',
    location: 'Chicago, IL',
    rate: '$140-165/hr',
    remote: 'Hybrid',
    duration: '5 months',
    applied_for: '2024-12-30',
  },
  {
    title: 'PHP Laravel Developer',
    company: 'Laravel Specialists',
    status: 'NEW',
    description: 'Laravel framework specialist for web applications',
    primary_tech_stack: 'PHP, Laravel, MySQL',
    location: 'Denver, CO',
    rate: '$110-130/hr',
    remote: 'Full Remote',
    duration: '4 months',
    applied_for: '2024-12-29',
  },
  {
    title: 'Database Administrator',
    company: 'Data Management',
    status: 'INTERVIEW',
    description: 'DBA specialist for database optimization and management',
    primary_tech_stack: 'PostgreSQL, MySQL, SQL Server',
    location: 'Portland, OR',
    rate: '$130-155/hr',
    remote: 'Hybrid',
    duration: '6 months',
    applied_for: '2024-12-28',
  },
  {
    title: 'MongoDB Expert',
    company: 'NoSQL Specialists',
    status: 'NEW',
    description: 'MongoDB and document database specialist',
    primary_tech_stack: 'MongoDB, Mongoose, Node.js',
    location: 'Philadelphia, PA',
    rate: '$120-140/hr',
    remote: 'Remote',
    duration: '4 months',
    applied_for: '2024-12-27',
  },
  {
    title: 'Redis Expert',
    company: 'Cache Masters',
    status: 'IN_PROGRESS',
    description: 'Redis specialist for caching and session management',
    primary_tech_stack: 'Redis, Node.js, Python',
    location: 'Miami, FL',
    rate: '$125-145/hr',
    remote: 'Hybrid',
    duration: '3 months',
    applied_for: '2024-12-26',
  },
  {
    title: 'Microservices Architect',
    company: 'Scalable Systems',
    status: 'OFFER',
    description: 'Design and implement microservices architecture',
    primary_tech_stack: 'Microservices, Docker, Kubernetes',
    location: 'Atlanta, GA',
    rate: '$160-190/hr',
    remote: 'Remote',
    duration: '6 months',
    applied_for: '2024-12-25',
  },
  {
    title: 'Docker & Kubernetes Expert',
    company: 'Container Tech',
    status: 'NEW',
    description: 'Container orchestration and DevOps specialist',
    primary_tech_stack: 'Docker, Kubernetes, CI/CD',
    location: 'Phoenix, AZ',
    rate: '$140-165/hr',
    remote: 'Hybrid',
    duration: '5 months',
    applied_for: '2024-12-24',
  },
  {
    title: 'AWS Backend Developer',
    company: 'Cloud Systems',
    status: 'NEW',
    description: 'AWS specialist for serverless and cloud applications',
    primary_tech_stack: 'AWS, Lambda, DynamoDB',
    location: 'San Diego, CA',
    rate: '$145-170/hr',
    remote: 'Full Remote',
    duration: '4 months',
    applied_for: '2024-12-23',
  },
  {
    title: 'GraphQL API Developer',
    company: 'Modern APIs',
    status: 'IN_PROGRESS',
    description: 'Build GraphQL APIs with Apollo Server',
    primary_tech_stack: 'GraphQL, Node.js, TypeScript',
    location: 'Washington, DC',
    rate: '$135-155/hr',
    remote: 'Hybrid',
    duration: '4 months',
    applied_for: '2024-12-22',
  },
  {
    title: 'REST API Developer',
    company: 'API Builders',
    status: 'INTERVIEW',
    description: 'RESTful API design and development specialist',
    primary_tech_stack: 'Node.js, Express, OpenAPI',
    location: 'Raleigh, NC',
    rate: '$130-150/hr',
    remote: 'Remote',
    duration: '3 months',
    applied_for: '2024-12-21',
  },
  {
    title: 'Authentication & Security Developer',
    company: 'Security First',
    status: 'NEW',
    description: 'OAuth2, JWT, and security implementation specialist',
    primary_tech_stack: 'Security, OAuth2, JWT',
    location: 'Orlando, FL',
    rate: '$150-175/hr',
    remote: 'Hybrid',
    duration: '5 months',
    applied_for: '2024-12-20',
  },
  {
    title: 'Real-time Systems Developer',
    company: 'Real-time Tech',
    status: 'NEW',
    description: 'WebSockets and real-time communication specialist',
    primary_tech_stack: 'WebSockets, Socket.io, Node.js',
    location: 'Minneapolis, MN',
    rate: '$140-165/hr',
    remote: 'Remote',
    duration: '4 months',
    applied_for: '2024-12-19',
  },
  {
    title: 'Streaming Data Developer',
    company: 'Data Streaming',
    status: 'OFFER',
    description: 'Kafka and event streaming specialist',
    primary_tech_stack: 'Kafka, Stream Processing, Java',
    location: 'Nashville, TN',
    rate: '$145-170/hr',
    remote: 'Full Remote',
    duration: '6 months',
    applied_for: '2024-12-18',
  },
  {
    title: 'ETL Developer',
    company: 'Data Integration',
    status: 'NEW',
    description: 'Extract, Transform, Load data pipeline specialist',
    primary_tech_stack: 'Python, Airflow, SQL',
    location: 'Memphis, TN',
    rate: '$125-145/hr',
    remote: 'Hybrid',
    duration: '4 months',
    applied_for: '2024-12-17',
  },
  {
    title: 'Search Specialist (Elasticsearch)',
    company: 'Search Tech',
    status: 'NEW',
    description: 'Elasticsearch and search implementation specialist',
    primary_tech_stack: 'Elasticsearch, Kibana, Lucene',
    location: 'Tucson, AZ',
    rate: '$130-150/hr',
    remote: 'Remote',
    duration: '3 months',
    applied_for: '2024-12-16',
  },
  {
    title: 'Queue & Job Processing Developer',
    company: 'Job Processors',
    status: 'IN_PROGRESS',
    description: 'Bull, RabbitMQ, and job queue specialist',
    primary_tech_stack: 'Bull, RabbitMQ, Node.js',
    location: 'Fresno, CA',
    rate: '$125-145/hr',
    remote: 'Hybrid',
    duration: '3 months',
    applied_for: '2024-12-15',
  },
  {
    title: 'Email & Notification Specialist',
    company: 'Communication Systems',
    status: 'NEW',
    description: 'Email, SMS, and push notification systems',
    primary_tech_stack: 'Node.js, Nodemailer, Twilio',
    location: 'Sacramento, CA',
    rate: '$115-135/hr',
    remote: 'Full Remote',
    duration: '3 months',
    applied_for: '2024-12-14',
  },
  {
    title: 'Payment Integration Developer',
    company: 'FinTech Solutions',
    status: 'INTERVIEW',
    description: 'Stripe, PayPal, and payment gateway integration',
    primary_tech_stack: 'Stripe API, Node.js, PCI Compliance',
    location: 'Long Beach, CA',
    rate: '$140-160/hr',
    remote: 'Remote',
    duration: '4 months',
    applied_for: '2024-12-13',
  },
  {
    title: 'File Storage & CDN Developer',
    company: 'Storage Solutions',
    status: 'NEW',
    description: 'S3, CloudFront, and file storage specialist',
    primary_tech_stack: 'AWS S3, CloudFront, Node.js',
    location: 'Kansas City, MO',
    rate: '$120-140/hr',
    remote: 'Hybrid',
    duration: '3 months',
    applied_for: '2024-12-12',
  },

  // DevOps & Infrastructure (20 requirements)
  {
    title: 'DevOps Engineer',
    company: 'Infrastructure Inc',
    status: 'NEW',
    description: 'DevOps specialist for CI/CD pipeline management',
    primary_tech_stack: 'Docker, Kubernetes, Jenkins',
    location: 'San Francisco, CA',
    rate: '$145-175/hr',
    remote: 'Hybrid',
    duration: '6 months',
    applied_for: '2025-01-05',
  },
  {
    title: 'Cloud Architect (AWS)',
    company: 'AWS Specialists',
    status: 'IN_PROGRESS',
    description: 'AWS cloud architecture design and implementation',
    primary_tech_stack: 'AWS, Terraform, CloudFormation',
    location: 'New York, NY',
    rate: '$160-190/hr',
    remote: 'Remote',
    duration: '6 months',
    applied_for: '2025-01-04',
  },
  {
    title: 'Azure Cloud Engineer',
    company: 'Microsoft Azure',
    status: 'INTERVIEW',
    description: 'Azure specialist for cloud infrastructure',
    primary_tech_stack: 'Azure, PowerShell, Terraform',
    location: 'Austin, TX',
    rate: '$150-175/hr',
    remote: 'Full Remote',
    duration: '5 months',
    applied_for: '2025-01-03',
  },
  {
    title: 'GCP Developer',
    company: 'Google Cloud',
    status: 'NEW',
    description: 'Google Cloud Platform specialist',
    primary_tech_stack: 'GCP, BigQuery, Cloud Run',
    location: 'Boston, MA',
    rate: '$145-170/hr',
    remote: 'On-site',
    duration: '5 months',
    applied_for: '2025-01-02',
  },
  {
    title: 'Infrastructure as Code Expert',
    company: 'IaC Solutions',
    status: 'OFFER',
    description: 'Terraform and CloudFormation specialist',
    primary_tech_stack: 'Terraform, CloudFormation, Python',
    location: 'Seattle, WA',
    rate: '$150-180/hr',
    remote: 'Hybrid',
    duration: '6 months',
    applied_for: '2025-01-01',
  },
  {
    title: 'Kubernetes Administrator',
    company: 'K8s Experts',
    status: 'NEW',
    description: 'Kubernetes cluster management and optimization',
    primary_tech_stack: 'Kubernetes, Helm, Docker',
    location: 'Los Angeles, CA',
    rate: '$140-165/hr',
    remote: 'Remote',
    duration: '5 months',
    applied_for: '2024-12-31',
  },
  {
    title: 'CI/CD Pipeline Engineer',
    company: 'Pipeline Automation',
    status: 'IN_PROGRESS',
    description: 'GitHub Actions, GitLab CI, and Jenkins expert',
    primary_tech_stack: 'GitHub Actions, GitLab CI, Jenkins',
    location: 'Chicago, IL',
    rate: '$130-155/hr',
    remote: 'Hybrid',
    duration: '4 months',
    applied_for: '2024-12-30',
  },
  {
    title: 'Monitoring & Observability Engineer',
    company: 'Observability Systems',
    status: 'NEW',
    description: 'Prometheus, Grafana, and ELK stack specialist',
    primary_tech_stack: 'Prometheus, Grafana, Datadog',
    location: 'Denver, CO',
    rate: '$135-160/hr',
    remote: 'Full Remote',
    duration: '4 months',
    applied_for: '2024-12-29',
  },
  {
    title: 'Logging Specialist',
    company: 'Log Management',
    status: 'INTERVIEW',
    description: 'ELK Stack and centralized logging specialist',
    primary_tech_stack: 'ELK Stack, Splunk, Logstash',
    location: 'Portland, OR',
    rate: '$125-150/hr',
    remote: 'Hybrid',
    duration: '3 months',
    applied_for: '2024-12-28',
  },
  {
    title: 'Security & Compliance Engineer',
    company: 'SecOps',
    status: 'NEW',
    description: 'Cloud security and compliance specialist',
    primary_tech_stack: 'Security, Compliance, IAM',
    location: 'Philadelphia, PA',
    rate: '$150-180/hr',
    remote: 'Remote',
    duration: '6 months',
    applied_for: '2024-12-27',
  },
  {
    title: 'Network Engineer',
    company: 'Network Systems',
    status: 'IN_PROGRESS',
    description: 'Network infrastructure and security specialist',
    primary_tech_stack: 'Networking, VPN, Load Balancing',
    location: 'Miami, FL',
    rate: '$130-155/hr',
    remote: 'Hybrid',
    duration: '4 months',
    applied_for: '2024-12-26',
  },
  {
    title: 'Database Migration Engineer',
    company: 'Data Migration',
    status: 'OFFER',
    description: 'Database migration and data integration specialist',
    primary_tech_stack: 'PostgreSQL, MySQL, MongoDB',
    location: 'Atlanta, GA',
    rate: '$140-165/hr',
    remote: 'Remote',
    duration: '3 months',
    applied_for: '2024-12-25',
  },
  {
    title: 'Performance Tuning Engineer',
    company: 'Performance Labs',
    status: 'NEW',
    description: 'Database and application performance optimization',
    primary_tech_stack: 'PostgreSQL, MySQL, Performance Tools',
    location: 'Phoenix, AZ',
    rate: '$135-160/hr',
    remote: 'Hybrid',
    duration: '4 months',
    applied_for: '2024-12-24',
  },
  {
    title: 'Backup & Disaster Recovery Specialist',
    company: 'DR Solutions',
    status: 'NEW',
    description: 'Backup strategy and disaster recovery expert',
    primary_tech_stack: 'Backup Solutions, AWS, Azure',
    location: 'San Diego, CA',
    rate: '$130-150/hr',
    remote: 'Full Remote',
    duration: '3 months',
    applied_for: '2024-12-23',
  },
  {
    title: 'Load Balancing Engineer',
    company: 'Scalability Inc',
    status: 'IN_PROGRESS',
    description: 'Load balancing and high availability specialist',
    primary_tech_stack: 'NGINX, HAProxy, Load Balancing',
    location: 'Washington, DC',
    rate: '$125-145/hr',
    remote: 'Hybrid',
    duration: '3 months',
    applied_for: '2024-12-22',
  },
  {
    title: 'Serverless Architect',
    company: 'Serverless Tech',
    status: 'INTERVIEW',
    description: 'AWS Lambda and serverless architecture specialist',
    primary_tech_stack: 'Lambda, Serverless Framework, AWS',
    location: 'Raleigh, NC',
    rate: '$145-170/hr',
    remote: 'Remote',
    duration: '4 months',
    applied_for: '2024-12-21',
  },
  {
    title: 'Configuration Management Expert',
    company: 'Config Masters',
    status: 'NEW',
    description: 'Ansible and configuration management specialist',
    primary_tech_stack: 'Ansible, Chef, Puppet',
    location: 'Orlando, FL',
    rate: '$125-145/hr',
    remote: 'Hybrid',
    duration: '3 months',
    applied_for: '2024-12-20',
  },
  {
    title: 'Container Registry Administrator',
    company: 'Registry Management',
    status: 'NEW',
    description: 'Docker Registry and container management specialist',
    primary_tech_stack: 'Docker Registry, Artifactory, Quay',
    location: 'Minneapolis, MN',
    rate: '$120-140/hr',
    remote: 'Remote',
    duration: '3 months',
    applied_for: '2024-12-19',
  },
  {
    title: 'Infrastructure Automation Engineer',
    company: 'Automation First',
    status: 'OFFER',
    description: 'Automation specialist for infrastructure operations',
    primary_tech_stack: 'Python, Terraform, Ansible',
    location: 'Nashville, TN',
    rate: '$135-160/hr',
    remote: 'Full Remote',
    duration: '4 months',
    applied_for: '2024-12-18',
  },
];

async function bulkCreateRequirements() {
  try {
    console.log(`Creating ${requirements.length} requirements...`);
    
    // Get current user or use a test ID
    const { data: { session }, error: authError } = await supabase.auth.getSession();
    
    if (authError) {
      console.error('Auth error:', authError);
      process.exit(1);
    }
    
    const userId = session?.user?.id;
    
    if (!userId) {
      console.error('No authenticated user found. Please ensure you are logged in.');
      process.exit(1);
    }
    
    console.log(`Using user ID: ${userId}`);
    
    // Create requirements in batches to avoid overwhelming the API
    const batchSize = 10;
    let successCount = 0;
    let errorCount = 0;
    
    for (let i = 0; i < requirements.length; i += batchSize) {
      const batch = requirements.slice(i, i + batchSize);
      
      const batchResults = await Promise.allSettled(
        batch.map(req => 
          supabase
            .from('requirements')
            .insert({
              ...req,
              user_id: userId,
            })
            .select()
        )
      );
      
      batchResults.forEach((result) => {
        if (result.status === 'fulfilled') {
          if (result.value.error) {
            console.error('Error creating requirement:', result.value.error);
            errorCount++;
          } else {
            successCount++;
          }
        } else {
          console.error('Batch error:', result.reason);
          errorCount++;
        }
      });
      
      console.log(`Processed ${Math.min(i + batchSize, requirements.length)} of ${requirements.length}`);
    }
    
    console.log(`\nCompleted! Success: ${successCount}, Errors: ${errorCount}`);
  } catch (error) {
    console.error('Failed to create bulk requirements:', error);
    process.exit(1);
  }
}

// Run the function
bulkCreateRequirements().then(() => {
  console.log('All done!');
  process.exit(0);
});
